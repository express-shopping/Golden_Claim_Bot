<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0,  maximum-scale=1.0,  user-scalable=no"  /> 
<title>Golden  Claim  |  Pro</title> 
<script  src="https://telegram.org/js/telegram-web-app.js"></script>
<script src="https://unpkg.com/@tonconnect/ui@latest/dist/tonconnect-ui.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet" />
<style>
:root { --gold: #f3ba2f; --bg: #000; --card: #151515; }
body { margin: 0; background: var(--bg); color: white; font-family: 'Cairo', sans-serif; overflow: hidden; }
.header { display: flex; justify-content: space-between; align-items: center; padding: 10px 15px; background: #0a0a0a; border-bottom: 1px solid #222; }
.u-info { display: flex; align-items: center; gap: 8px; }
#u-pic { width: 32px; height: 32px; border-radius: 50%; border: 1px solid var(--gold); }
.content { height: calc(100vh - 130px); overflow-y: auto; padding: 20px; text-align: center; }
.page { display: none; } .page.active { display: block; }
.bal-val { font-size: 42px; font-weight: 900; color: #fff; margin: 10px 0; }
.mine-btn { width: 210px; height: 210px; border-radius: 50%; background: radial-gradient(circle, #222 0%, #000 100%); border: 6px solid #1a1a1a; margin: 20px auto; display: flex; align-items: center; justify-content: center; cursor: pointer; transition: 0.1s; position: relative; }
.mine-btn.active { border-color: var(--gold); box-shadow: 0 0 20px rgba(243,186,47,0.3); }
.mine-btn:active { transform: scale(0.96); }
.cards { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-top: 20px; }
.card { background: var(--card); border: 1px solid #222; border-radius: 15px; padding: 12px; }
.btn-main { background: var(--gold); color: #000; border: none; width: 100%; padding: 10px; border-radius: 10px; font-weight: bold; cursor: pointer; }
.nav { position: fixed; bottom: 0; width: 100%; background: #0a0a0a; display: flex; border-top: 1px solid #222; padding: 10px 0; }
.n-item { flex: 1; text-align: center; color: #555; cursor: pointer; font-size: 11px; }
.n-item.active { color: var(--gold); }
#toast { position: fixed; bottom: 80px; left: 50%; transform: translateX(-50%); background: var(--gold); color: #000; padding: 8px 20px; border-radius: 20px; font-weight: bold; display: none; z-index: 1000; }
#wallet-info { margin-top: 10px; font-size: 13px; color: #ccc; }
#connect-wallet-btn { background: var(--gold); color: #000; border: none; padding: 8px 16px; border-radius: 8px; cursor: pointer; margin-top: 10px; font-weight: bold; }
</style>
</head>
<body>
<div id="toast"></div>
<div class="header">
    <div class="u-info">
        <img id="u-pic" src="https://ui-avatars.com/api/?name=G" />
        <span id="u-name" style="font-size: 13px; font-weight: bold;">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</span>
    </div>
    <div id="ton-button"></div>
</div>

<div class="content">
    <div id="p-mine" class="page active">
        <div style="color:#888; font-size: 12px;">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø±ØµÙŠØ¯</div>
        <div class="bal-val" id="bal">0.0000</div>
        <div id="m-circle" class="mine-btn" onclick="startMining()">
            <img src="https://cdn-icons-png.flaticon.com/512/6585/6585012.png" width="110" />
        </div>
        <div id="timer" style="color:var(--gold); font-weight:bold; margin-bottom:15px;">Ø¬Ø§Ù‡Ø² Ù„Ù„Ø¨Ø¯Ø¡</div>
        <div class="cards">
            <div class="card">
                <h4 style="margin:0; font-size:12px; color:var(--gold);">Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬ Ø§Ù„Ø°Ù‡Ø¨ÙŠ</h4>
                <p style="font-size:10px; color:#888;">+0.05/Ø³Ø§Ø¹Ø©</p>
                <button class="btn-main" style="padding:5px; font-size:11px;" onclick="buy('s')">10 Ø°Ù‡Ø¨</button>
            </div>
            <div class="card">
                <h4 style="margin:0; font-size:12px; color:var(--gold);">Ø®Ø²Ø§Ù† Ø¹Ù…Ù„Ø§Ù‚</h4>
                <p style="font-size:10px; color:#888;">+2 Ø³Ø§Ø¹Ø© ØªØ¹Ø¯ÙŠÙ†</p>
                <button class="btn-main" style="padding:5px; font-size:11px;" onclick="buy('t')">20 Ø°Ù‡Ø¨</button>
            </div>
        </div>
    </div>

    <div id="p-tasks" class="page">
        <h3>Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„ÙŠÙˆÙ…ÙŠØ© ğŸ“‹</h3>
        <div class="card" style="display:flex; justify-content:space-between; align-items:center; margin-bottom:10px;">
            <div style="text-align:right;">
                <h4  style="margin:0;">Ø§Ù†Ø¶Ù…  Ù„Ù‚Ù†Ø§ØªÙ†Ø§</h4> 
                <small  style="color:#888">+5,000  Ø°Ù‡Ø¨</small> 
            </div> 
            <button  class="btn-main"  style="width:70px;"  Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø±="doTask(5000)">Ø¨Ø¯Ø¡</button>
        </div>
        <div class="card" style="display:flex; justify-content:space-between; align-items:center;">
            <div style="text-align:right;">
                <h4 style="margin:0;">Ø¯Ø¹ÙˆØ©  ØµØ¯ÙŠÙ‚</h4> 
                <small  style="color:#888">+10,000  Ø°Ù‡Ø¨</small> 
            </div> 
            <button  class="btn-main"  style="width:70px;"  onclick="copyRef()">Ø§Ù„Ù†Ø³Ø®</button>
        </div>
    </div>

    <div id="p-wallet" class="page">
        <h3>Ø§Ù„Ù…Ø­ÙØ¸Ø© ğŸ‘›</h3>
        <div class="card" style="padding:30px 10px;">
            <div class="bal-val" id="w-bal" style="color:var(--gold)">0.0000</div>
            <p style="font-size:12px; color:#888;">Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ Ù„Ù„Ø³Ø­Ø¨: 100 Ø°Ù‡Ø¨</p>
            <button class="btn-main" style="padding:15px;" onclick="showToast('Ø§Ù„Ø³Ø­Ø¨ Ø³ÙŠÙØªØ­ Ù‚Ø±ÙŠØ¨Ø§Ù‹!')">Ø·Ù„Ø¨ Ø³Ø­Ø¨ Ø§Ù„Ø±ØµÙŠØ¯</button>
            <div id="wallet-info">
                <div id="wallet-address">Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ù…Ø­ÙØ¸Ø©</div>
                <button id="connect-wallet-btn" onclick="connectWallet()">Ø±Ø¨Ø· Ø§Ù„Ù…Ø­ÙØ¸Ø©</button>
            </div>
        </div>
    </div>
</div>

<div class="nav">
    <div class="n-item active" onclick="tab('p-mine', this)"><span>â›ï¸</span><div>ØªØ¹Ø¯ÙŠÙ†</div></div>
    <div class="n-item" onclick="tab('p-tasks', this)"><span>ğŸ“‹</span><div>Ù…Ù‡Ø§Ù…</div></div>
    <div class="n-item" onclick="tab('p-wallet', this)"><span>ğŸ‘›</span><div>Ù…Ø­ÙØ¸Ø©</div></div>
</div>

<script>
const tg = window.Telegram.WebApp;
tg.expand();

// Ø¥Ø¹Ø¯Ø§Ø¯ TON Connect
let tonConnect = null;
let walletAddress = null;

function initTonConnect() {
    try {
        tonConnect = new TON_CONNECT_UI.TonConnectUI({
            manifestUrl: 'https://raw.githubusercontent.com/ton-community/tutorials/main/03-client/test/public/tonconnect-manifest.json', // Ø±Ø§Ø¨Ø· ØµØ­ÙŠØ­
            buttonRootId: 'ton-button'
        });
        // Ø¥Ø¶Ø§ÙØ© Ø­Ø¯Ø« Ø¹Ù†Ø¯ Ø§Ù„Ø§ØªØµØ§Ù„
        tonConnect.on('connect', (wallet) => {
            if (wallet?.account?.address) {
                walletAddress = wallet.account.address;
                document.getElementById('wallet-address').innerText = 'Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…Ø­ÙØ¸Ø©: ' + walletAddress;
                document.getElementById('connect-wallet-btn').style.display = 'none';
                showToast('ØªÙ… Ø±Ø¨Ø· Ø§Ù„Ù…Ø­ÙØ¸Ø© Ø¨Ù†Ø¬Ø§Ø­!');
                // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø±ØµÙŠØ¯ Ù…Ù† Ø§Ù„Ù…Ø­ÙØ¸Ø©
                fetchBalanceFromWallet(walletAddress);
            }
        });
        // ØªÙØ¹ÙŠÙ„ Ø²Ø± Ø§Ù„Ø±Ø¨Ø·
        document.getElementById('connect-wallet-btn').onclick = () => {
            tonConnect.connect();
        };
    } catch (err) {
        console.error('Ø®Ø·Ø£ ÙÙŠ ØªÙ‡ÙŠØ¦Ø© TON Connect:', err);
        document.getElementById('wallet-address').innerText = 'Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ù…Ø­ÙØ¸Ø©';
    }
}

// Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ ØªÙ‡ÙŠØ¦Ø© TON Connect Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
initTonConnect();

// Ø¯Ø§Ù„Ø© Ù„Ø·Ù„Ø¨ Ø±ØµÙŠØ¯ Ù…Ù† Ø§Ù„Ù…Ø­ÙØ¸Ø© (ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ù„Ø¯ÙŠÙƒ API Ø£Ùˆ Ø¹Ù‚Ø¯ Ø°ÙƒÙŠ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ø³ØªØ¯Ø¹Ø§Ø¤Ù‡)
function fetchBalanceFromWallet(address) {
    // Ù‡Ù†Ø§ ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø¶Ø§ÙØ© Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Ù„API Ø£Ùˆ Ø¹Ù‚Ø¯ Ø°ÙƒÙŠ Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø±ØµÙŠØ¯
    // ÙƒÙ…Ø«Ø§Ù„ØŒ Ø³Ø£Ø¶Ø¹ Ø±ØµÙŠØ¯ Ø§ÙØªØ±Ø§Ø¶ÙŠ Ø£Ùˆ Ø±ØµÙŠØ¯ Ù…Ù† API ÙˆÙ‡Ù…ÙŠ (ÙŠØ¬Ø¨ Ø§Ø³ØªØ¨Ø¯Ø§Ù„Ù‡ Ø¨Ù†Ø¸Ø§Ù…Ùƒ Ø§Ù„Ø®Ø§Øµ)
    // Ù„Ùˆ Ù„Ø¯ÙŠÙƒ APIØŒ Ø§Ø³ØªØ¯Ø¹ÙÙ‡ Ù‡Ù†Ø§
    // Ù…Ø«Ø§Ù„:
    // fetch(`https://api.yourblockchain.com/balance?address=${address}`)
    //   .then(res => res.json())
    //   .then(data => {
    //       bal = parseFloat(data.balance);
    //       syncUI();
    //   });
    // Ù…Ø¤Ù‚ØªÙ‹Ø§ØŒ Ø³Ù†ÙØªØ±Ø¶ Ø£Ù† Ø§Ù„Ø±ØµÙŠØ¯ 150 Ø°Ù‡Ø¨:
    bal = 150; // Ø§Ø³ØªØ¨Ø¯Ù„ Ù‡Ø°Ø§ Ø¨ÙƒÙˆØ¯ Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ
    syncUI();
}

// ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ¹Ø±Ø¶Ù‡Ø§
let bal = parseFloat(localStorage.getItem('gb_bal')) || 0;
let speed = parseFloat(localStorage.getItem('gb_spd')) || 0.01;
let limit = parseInt(localStorage.getItem('gb_lim')) || 6;
let endTime = localStorage.getItem('gb_end');

function showToast(m) {
    const t = document.getElementById('toast');
    t.innerText = m; t.style.display = 'block';
    setTimeout(() => t.style.display = 'none', 2500);
}

function syncUI() {
    document.getElementById('bal').innerText = bal.toFixed(4);
    document.getElementById('w-bal').innerText = bal.toFixed(4);
    document.getElementById('u-name').innerText = tg.initDataUnsafe.user?.first_name || "Ù…Ø³ØªØ®Ø¯Ù…";
    document.getElementById('u-pic').src = tg.initDataUnsafe.user?.photo_url || "https://ui-avatars.com/api/?name=M";
}

function startMining() {
    if (!endTime) {
        endTime = Date.now() + (limit * 3600000);
        localStorage.setItem('gb_end', endTime);
        tg.HapticFeedback.impactOccurred('medium');
        showToast("Ø¨Ø¯Ø£ Ø§Ù„ØªØ¹Ø¯ÙŠÙ† Ø¨Ù†Ø¬Ø§Ø­! ğŸš€");
    } else if (Date.now() >= endTime) {
        bal += (speed * limit);
        endTime = null;
        localStorage.removeItem('gb_end');
        tg.HapticFeedback.notificationOccurred('success');
        showToast("ØªÙ… Ø¬Ù…Ø¹ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­! ğŸ’°");
        syncUI();
    }
}

function loop() {
    const timer = document.getElementById('timer');
    const circle = document.getElementById('m-circle');
    if (endTime) {
        let diff = endTime - Date.now();
        if (diff > 0) {
            circle.classList.add('active');
            let h = Math.floor(diff / 3600000);
            let m = Math.floor((diff % 3600000) / 60000);
            timer.innerText = `Ù…ØªØ¨Ù‚ÙŠ: ${h}Ø³ Ùˆ ${m}Ø¯`;
        } else {
            circle.classList.remove('active');
            timer.innerText = "Ø§Ø¬Ù…Ø¹ Ø§Ù„Ø°Ù‡Ø¨ Ø§Ù„Ø¢Ù†! âœ¨";
        }
    } else {
        circle.classList.remove('active');
        timer.innerText = "Ø¬Ø§Ù‡Ø² Ù„Ù„Ø¨Ø¯Ø¡";
    }
}

function buy(type) {
    let cost = (type === 's') ? 10 : 20;
    if (bal >= cost) {
        bal -= cost;
        if (type === 's') speed += 0.05; else limit += 2;
        syncUI();
        showToast("ØªÙ… Ø§Ù„ØªØ·ÙˆÙŠØ±! ğŸ”¥");
    } else showToast("Ø±ØµÙŠØ¯ ØºÙŠØ± ÙƒØ§ÙÙ!");
}

function tab(id, el) {
    document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
    document.querySelectorAll('.n-item').forEach(n => n.classList.remove('active'));
    document.getElementById(id).classList.add('active');
    el.classList.add('active');
}

function doTask(r) {
    showToast("Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù‚Ù‚...");
    setTimeout(() => { bal += r; syncUI(); showToast("ØªÙ…Øª Ø§Ù„Ù…Ù‡Ù…Ø©! ğŸ"); }, 2000);
}

function copyRef() {
    const link = `https://t.me/GoldenClaim_Bot?start=${tg.initDataUnsafe.user?.id || 'ref'}`;
    navigator.clipboard.writeText(link);
    showToast("ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·! ğŸ”—");
}

// ÙˆØ¸ÙŠÙØ© Ù„Ø±Ø¨Ø· Ø§Ù„Ù…Ø­ÙØ¸Ø© Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø²Ø± Ø§Ù„Ø±Ø¨Ø·
function connectWallet() {
    if (tonConnect) {
        tonConnect.connect();
    } else {
        showToast("Ø®Ø·Ø£ ÙÙŠ ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù…Ø­ÙØ¸Ø©");
    }
}

// ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø±ØµÙŠØ¯ Ø¹Ù†Ø¯ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ù…Ø­ÙØ¸Ø©
// ÙŠÙ…ÙƒÙ† Ø£Ù† ØªØ¶Ø¹ Ù‡Ù†Ø§ Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ API Ø£Ùˆ Ø¹Ù‚Ø¯ Ø°ÙƒÙŠ
</script>
</body>
</html>
