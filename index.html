<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Golden Claim | Mining Pro</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://unpkg.com/@tonconnect/ui@latest/dist/tonconnect-ui.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root { --gold: #f3ba2f; --bg: #0b0e11; --card: #1c1f24; }
        body { margin: 0; background: var(--bg); color: white; font-family: 'Montserrat', sans-serif; overflow: hidden; height: 100vh; }
        .app { height: 100vh; display: flex; flex-direction: column; padding: 15px; }
        
        .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .u-info { display: flex; align-items: center; gap: 10px; background: var(--card); padding: 8px 15px; border-radius: 20px; border: 1px solid #333; }
        .u-info img { width: 30px; height: 30px; border-radius: 50%; border: 1px solid var(--gold); }

        .screen { display: none; flex-direction: column; align-items: center; flex-grow: 1; overflow-y: auto; padding-bottom: 100px; width: 100%; }
        .active { display: flex; }

        /* Mining Center */
        .mining-container { background: linear-gradient(180deg, #1c1f24 0%, #0b0e11 100%); width: 100%; border-radius: 30px; padding: 30px; text-align: center; border: 1px solid #333; }
        .balance-title { color: #888; font-size: 14px; margin-bottom: 5px; }
        .main-balance { font-size: 40px; font-weight: 900; color: white; margin-bottom: 25px; }
        
        .mine-btn { 
            width: 200px; height: 200px; border-radius: 50%; border: none;
            background: radial-gradient(circle, var(--gold) 0%, #8a6d1f 100%);
            box-shadow: 0 0 30px rgba(243, 186, 47, 0.2); color: black;
            font-size: 20px; font-weight: 900; cursor: pointer; transition: 0.3s;
        }
        .mine-btn:disabled { background: #333; color: #888; box-shadow: none; cursor: not-allowed; }

        /* Upgrades & Cards */
        .card { background: var(--card); width: 100%; border-radius: 20px; padding: 15px; border: 1px solid #333; margin-top: 15px; }
        .btn-action { background: var(--gold); color: black; border: none; padding: 12px; border-radius: 12px; font-weight: 900; width: 100%; margin-top: 10px; cursor: pointer; }
        
        /* Navigation */
        .nav { position: fixed; bottom: 15px; left: 15px; right: 15px; background: rgba(28, 31, 36, 0.95); border-radius: 25px; display: flex; justify-content: space-around; padding: 15px; border: 1px solid #333; backdrop-filter: blur(10px); }
        .nav-item { color: #666; text-align: center; font-size: 10px; font-weight: bold; cursor: pointer; }
        .nav-item.active { color: var(--gold); }
    </style>
</head>
<body>

<div class="app">
    <div class="header">
        <div class="u-info">
            <img id="u-avatar" src="">
            <span id="u-name">Loading...</span>
        </div>
        <div id="ton-connect"></div>
    </div>

    <div id="home" class="screen active">
        <div class="mining-container">
            <div class="balance-title">AVAILABLE ASSETS</div>
            <div class="main-balance" id="balance">0.00</div>
            
            <button id="mine-btn" class="mine-btn" onclick="startMining()">START MINING</button>
            <div id="timer" style="margin-top: 15px; font-weight: 900; color: var(--gold);"></div>
            
            <div style="margin-top: 25px; display: flex; justify-content: space-around;">
                <div><small style="color:#888">Speed</small><br><b id="speed-val">0.01/h</b></div>
                <div><small style="color:#888">Storage</small><br><b>6 Hours</b></div>
            </div>
        </div>

        <div class="card">
            <h3>Boost Mining Speed</h3>
            <p style="font-size: 12px; color: #888;">Increase your hourly rate by 0.05</p>
            <button class="btn-action" onclick="upgradeSpeed()">Upgrade (10.00 Gold)</button>
        </div>
    </div>

    <div id="wallet" class="screen">
        <div class="mining-container" style="padding: 40px 20px;">
            <h2>Withdraw Assets</h2>
            <div class="main-balance" id="with-bal">0.00</div>
            <p style="font-size: 12px; color: #888;">Enter Amount to Withdraw to TON Wallet</p>
            <button class="btn-action" onclick="requestWithdraw()">SEND REQUEST</button>
        </div>
    </div>

    <div id="friends" class="screen">
        <h2>Invite Friends</h2>
        <div class="card">
            <p>Your Referral Link:</p>
            <div style="background:#000; padding:10px; border-radius:10px; font-size:10px; margin-bottom:10px;" id="ref-link">https://t.me/GoldenClaim_Bot?ref=user</div>
            <button class="btn-action" onclick="copyLink()">COPY LINK</button>
        </div>
    </div>

    <div id="admin" class="screen">
        <h2 style="color:red">ADMIN CONTROL</h2>
        <div id="admin-content" style="width:100%"></div>
    </div>

    <nav class="nav">
        <div class="nav-item active" onclick="showTab('home', this)">Mining</div>
        <div class="nav-item" onclick="showTab('friends', this)">Friends</div>
        <div class="nav-item" onclick="showTab('wallet', this)">Wallet</div>
        <div class="nav-item" id="admin-tab" style="display:none;" onclick="showTab('admin', this)">Admin</div>
    </nav>
</div>

<script>
    const tg = window.Telegram.WebApp;
    tg.expand();

    // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ø­ÙØ¸Ø©
    const tonConnectUI = new TON_CONNECT_UI.TonConnectUI({
        manifestUrl: 'https://raw.githubusercontent.com/ton-community/tutorials/main/03-client/test/public/tonconnect-manifest.json',
        buttonRootId: 'ton-connect'
    });

    // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙˆØ§Ù„Ù„Ø¹Ø¨Ø©
    let balance = parseFloat(localStorage.getItem('g_bal')) || 0;
    let speed = parseFloat(localStorage.getItem('g_speed')) || 0.01;
    let miningEndTime = localStorage.getItem('g_end_time') || null;
    const adminID = 12345678; // Ø¶Ø¹ Ù‡Ù†Ø§ Ø§Ù„Ù€ ID Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ

    function updateUI() {
        document.getElementById('balance').innerText = balance.toFixed(4);
        document.getElementById('with-bal').innerText = balance.toFixed(4);
        document.getElementById('speed-val').innerText = speed.toFixed(2) + "/h";
        document.getElementById('u-name').innerText = tg.initDataUnsafe.user?.first_name || "Mugahed";
        document.getElementById('u-avatar').src = tg.initDataUnsafe.user?.photo_url || "https://via.placeholder.com/30";
        
        if(tg.initDataUnsafe.user?.id === adminID) document.getElementById('admin-tab').style.display = "block";
        
        localStorage.setItem('g_bal', balance);
        localStorage.setItem('g_speed', speed);
    }

    // Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ¹Ø¯ÙŠÙ† Ø§Ù„Ø²Ù…Ù†ÙŠ
    function startMining() {
        if (!miningEndTime) {
            const endTime = Date.now() + (6 * 60 * 60 * 1000); // 6 Ø³Ø§Ø¹Ø§Øª
            localStorage.setItem('g_end_time', endTime);
            miningEndTime = endTime;
            checkMining();
        }
    }

    function checkMining() {
        if (miningEndTime) {
            const now = Date.now();
            const diff = miningEndTime - now;
            
            if (diff > 0) {
                document.getElementById('mine-btn').disabled = true;
                document.getElementById('mine-btn').innerText = "MINING...";
                const hours = Math.floor(diff / 3600000);
                const mins = Math.floor((diff % 3600000) / 60000);
                document.getElementById('timer').innerText = `Time Left: ${hours}h ${mins}m`;
            } else {
                // Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„ØªØ¹Ø¯ÙŠÙ† - Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø±ØµÙŠØ¯
                balance += (speed * 6);
                localStorage.removeItem('g_end_time');
                miningEndTime = null;
                document.getElementById('mine-btn').disabled = false;
                document.getElementById('mine-btn').innerText = "CLAIM & RESTART";
                document.getElementById('timer').innerText = "Mining Finished!";
            }
        }
        updateUI();
    }

    // Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·
    function copyLink() {
        const link = document.getElementById('ref-link').innerText;
        const tempInput = document.createElement("input");
        tempInput.value = link;
        document.body.appendChild(tempInput);
        tempInput.select();
        document.execCommand("copy");
        document.body.removeChild(tempInput);
        alert("Link Copied Successfully! ðŸš€");
    }

    function upgradeSpeed() {
        if(balance >= 10) { balance -= 10; speed += 0.05; updateUI(); alert("Speed Upgraded!"); }
        else { alert("Need 10.00 Gold!"); }
    }

    function showTab(id, el) {
        document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
        document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        el.classList.add('active');
    }

    setInterval(checkMining, 1000);
    updateUI();
</script>
</body>
</html>

