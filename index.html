<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Golden Claim Pro</title>
    
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://unpkg.com/@tonconnect/ui@latest/dist/tonconnect-ui.min.js"></script>
    
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #FFD700;
            --bg: #050505;
            --card: rgba(255, 255, 255, 0.08);
            --glass: rgba(0, 0, 0, 0.6);
        }

        body {
            margin: 0; background: var(--bg); color: white;
            font-family: 'Cairo', sans-serif; overflow: hidden; height: 100vh;
        }

        /* ØªØµÙ…ÙŠÙ… Ø´Ø§Ø´Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ */
        #loader {
            position: fixed; inset: 0; background: #000; z-index: 9999;
            display: flex; justify-content: center; align-items: center; flex-direction: column;
        }

        .header {
            padding: 15px; display: flex; justify-content: space-between; align-items: center;
            background: var(--glass); backdrop-filter: blur(10px); border-bottom: 1px solid #222;
        }

        #ton-connect-button { scale: 0.8; } /* Ø²Ø± Ø§Ù„Ù…Ø­ÙØ¸Ø© Ø§Ù„Ø±Ø³Ù…ÙŠ */

        .balance-section { text-align: center; padding: 30px 0; }
        .balance-amount { font-size: 55px; font-weight: 900; color: var(--primary); }

        .coin-area {
            position: relative; width: 250px; height: 250px; margin: 0 auto;
            perspective: 1000px;
        }
        .coin-img {
            width: 100%; height: 100%; background: radial-gradient(circle, #ffe552, #b8860b);
            border-radius: 50%; box-shadow: 0 0 40px rgba(255, 215, 0, 0.4);
            display: flex; align-items: center; justify-content: center;
            font-size: 100px; font-weight: 900; color: rgba(0,0,0,0.2);
            transition: transform 0.1s; cursor: pointer;
        }

        .screen { display: none; height: 80vh; overflow-y: auto; padding: 20px; }
        .screen.active { display: block; }

        /* Ø³ØªØ§ÙŠÙ„ Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„ÙˆØ§Ù‚Ø¹ÙŠØ© */
        .task-box {
            background: var(--card); border-radius: 15px; padding: 15px;
            margin-bottom: 15px; display: flex; justify-content: space-between; align-items: center;
            border: 1px solid #333;
        }
        .btn-action {
            background: var(--primary); color: #000; border: none;
            padding: 8px 15px; border-radius: 10px; font-weight: bold; cursor: pointer;
        }
        .btn-verify { background: #0088cc; color: white; }

        .nav-bar {
            position: fixed; bottom: 0; width: 100%; background: #111;
            display: flex; justify-content: space-around; padding: 15px 0;
            border-top: 1px solid #333;
        }
        .nav-item { color: #666; font-size: 12px; text-align: center; cursor: pointer; }
        .nav-item.active { color: var(--primary); }
    </style>
</head>
<body>

<div id="loader">
    <h2 style="color:var(--primary)">GOLDEN CLAIM</h2>
    <p>Ø¨Ø±Ø¬Ø§Ø¡ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±...</p>
</div>

<div class="header">
    <div style="display:flex; align-items:center; gap:10px">
        <img id="uPic" style="width:40px; border-radius:50%">
        <span id="uName" style="font-weight:bold"></span>
    </div>
    <div id="ton-connect-button"></div> </div>

<div id="home" class="screen active">
    <div class="balance-section">
        <div class="balance-amount" id="userBal">0</div>
        <div style="color:var(--primary)">ØªØ¹Ø¯ÙŠÙ† Ø°Ù‡Ø¨ÙŠ Ù…Ø³ØªÙ…Ø±</div>
    </div>

    <div class="coin-area" id="mainTap">
        <div class="coin-img">G</div>
    </div>

    <div style="margin-top:40px">
        <div style="display:flex; justify-content:space-between; margin-bottom:5px">
            <span style="font-size:12px">Ø§Ù„Ø·Ø§Ù‚Ø© âš¡</span>
            <span id="energyNum" style="font-size:12px">1000/1000</span>
        </div>
        <div style="width:100%; height:8px; background:#222; border-radius:5px">
            <div id="energyBar" style="width:100%; height:100%; background:var(--primary); border-radius:5px; transition:0.3s"></div>
        </div>
    </div>
</div>

<div id="tasks" class="screen">
    <h2 style="text-align:center">Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„ÙƒØ¨Ø±Ù‰</h2>
    <div class="task-box">
        <div>
            <div>Ø§Ù†Ø¶Ù… Ù„Ù‚Ù†Ø§ØªÙ†Ø§</div>
            <div style="font-size:12px; color:var(--primary)">+10,000 Ù‚Ø·Ø¹Ø©</div>
        </div>
        <div id="task1-controls">
            <button class="btn-action" onclick="goTask('https://t.me/your_channel', 1)">ØªÙ†ÙÙŠØ°</button>
        </div>
    </div>
</div>

<div class="nav-bar">
    <div class="nav-item active" onclick="tab('home', this)">ğŸ <br>Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</div>
    <div class="nav-item" onclick="tab('tasks', this)">ğŸ“‹<br>Ø§Ù„Ù…Ù‡Ø§Ù…</div>
</div>

<script>
    const tg = window.Telegram.WebApp;
    tg.ready();

    // 1. Ø¥Ø¹Ø¯Ø§Ø¯ Ø±Ø¨Ø· Ø§Ù„Ù…Ø­ÙØ¸Ø© Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ
    const tonConnectUI = new TON_CONNECT_UI.TonConnectUI({
        manifestUrl: 'https://raw.githubusercontent.com/ton-connect/demo-dapp-with-react/master/public/tonconnect-manifest.json',
        buttonRootId: 'ton-connect-button'
    });

    // 2. Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
    let data = JSON.parse(localStorage.getItem('pro_data')) || {
        bal: 0,
        energy: 1000,
        tasks: { t1: 'none' } // none, doing, done
    };

    function save() {
        localStorage.setItem('pro_data', JSON.stringify(data));
        userBal.innerText = data.bal.toLocaleString();
        energyNum.innerText = `${data.energy}/1000`;
        energyBar.style.width = (data.energy / 10) + "%";
    }

    // 3. Ù…Ù†Ø·Ù‚ Ø§Ù„ØªØ¹Ø¯ÙŠÙ† (Tap)
    mainTap.onclick = (e) => {
        if (data.energy >= 2) {
            data.bal += 2;
            data.energy -= 2;
            tg.HapticFeedback.impactOccurred('medium');
            showPopup(e.clientX, e.clientY, "+2");
            save();
        }
    };

    // 4. Ù…Ù†Ø·Ù‚ Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„ÙˆØ§Ù‚Ø¹ÙŠ
    function goTask(url, id) {
        window.open(url, '_blank');
        const container = document.getElementById(`task${id}-controls`);
        container.innerHTML = `<button class="btn-action btn-verify" onclick="verifyTask(${id})">ØªØ­Ù‚Ù‚</button>`;
        data.tasks[`t${id}`] = 'doing';
        save();
    }

    function verifyTask(id) {
        tg.showConfirm("Ù‡Ù„ Ù‚Ù…Øª Ø¨Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù… ÙØ¹Ù„Ø§Ù‹ØŸ Ø³ÙŠØªÙ… ÙØ­Øµ Ø§Ù„Ø­Ø³Ø§Ø¨.");
        // Ù…Ø­Ø§ÙƒØ§Ø© Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„ÙØ­Øµ
        setTimeout(() => {
            data.bal += 10000;
            data.tasks[`t${id}`] = 'done';
            document.getElementById(`task${id}-controls`).innerHTML = `<span style="color:green">âœ… Ù…ÙƒØªÙ…Ù„</span>`;
            tg.showAlert("ØªÙ… Ø§Ù„ØªØ­Ù‚Ù‚ Ø¨Ù†Ø¬Ø§Ø­! +10,000 Ù‚Ø·Ø¹Ø©");
            save();
        }, 2000);
    }

    // Ø§Ù„ØªÙ†Ù‚Ù„ Ø¨ÙŠÙ† Ø§Ù„ØµÙØ­Ø§Øª
    function tab(name, el) {
        document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
        document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
        document.getElementById(name).classList.add('active');
        el.classList.add('active');
    }

    function showPopup(x, y, txt) {
        const p = document.createElement('div');
        p.innerText = txt;
        p.style.position = 'fixed';
        p.style.left = x + 'px';
        p.style.top = y + 'px';
        p.style.color = 'var(--primary)';
        p.style.fontWeight = 'bold';
        p.style.pointerEvents = 'none';
        p.animate([{transform:'translateY(0)', opacity:1}, {transform:'translateY(-100px)', opacity:0}], 800);
        document.body.appendChild(p);
        setTimeout(() => p.remove(), 800);
    }

    // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¹Ù†Ø¯ Ø§Ù„ÙØªØ­
    uName.innerText = tg.initDataUnsafe.user?.first_name || "Ù„Ø§Ø¹Ø¨";
    uPic.src = tg.initDataUnsafe.user?.photo_url || "https://cdn-icons-png.flaticon.com/512/3135/3135715.png";
    setTimeout(() => loader.style.display = 'none', 1500);
    save();

</script>
</body>
</html>

