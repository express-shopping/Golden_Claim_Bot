<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Golden Claim | Pro Mining</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://unpkg.com/@tonconnect/ui@2.0.9/dist/tonconnect-ui.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root { --gold: #f3ba2f; --bg: #0b0e11; --card: #1c1f24; --green: #00ff88; }
        body { margin: 0; background: var(--bg); color: white; font-family: 'Montserrat', sans-serif; overflow: hidden; height: 100vh; }
        
        /* ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø§Ø­ØªØ±Ø§ÙÙŠØ© */
        #toast { position: fixed; top: 25px; left: 50%; transform: translateX(-50%); background: rgba(243, 186, 47, 0.15); backdrop-filter: blur(12px); border: 1px solid var(--gold); padding: 12px 25px; border-radius: 50px; font-weight: 900; z-index: 10000; display: none; box-shadow: 0 5px 20px rgba(0,0,0,0.5); }

        .app { height: 100vh; display: flex; flex-direction: column; padding: 15px; box-sizing: border-box; }
        
        /* Ø§Ù„Ù‡ÙŠØ¯Ø± Ø§Ù„Ù…ØµØ­Ø­ */
        .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .u-box { display: flex; align-items: center; gap: 10px; background: var(--card); padding: 5px 12px; border-radius: 20px; border: 1px solid #333; }
        .u-box img { width: 28px; height: 28px; border-radius: 50%; border: 1px solid var(--gold); }
        
        /* ØªÙ†Ø³ÙŠÙ‚ Ø²Ø± Ø§Ù„Ù…Ø­ÙØ¸Ø© Ù„ÙŠÙƒÙˆÙ† Ø§Ø­ØªØ±Ø§ÙÙŠØ§Ù‹ ÙˆØµØºÙŠØ±Ø§Ù‹ */
        #ton-connect-button { transform: scale(0.85); transform-origin: right; }

        .screen { display: none; flex-direction: column; align-items: center; flex-grow: 1; overflow-y: auto; padding-bottom: 110px; width: 100%; }
        .active { display: flex; }

        /* Ù…Ù†Ø·Ù‚Ø© Ø§Ù„ØªØ¹Ø¯ÙŠÙ† ÙˆØ§Ù„Ø¯Ø§Ø¦Ø±Ø© Ø§Ù„Ù…ØªØ­Ø±ÙƒØ© */
        .mining-area { text-align: center; width: 100%; }
        .bal-txt { font-size: 42px; font-weight: 900; margin: 10px 0; text-shadow: 0 0 20px rgba(243,186,47,0.2); }
        
        .mine-circle { 
            width: 210px; height: 210px; border-radius: 50%; border: 6px solid #1c1f24;
            background: radial-gradient(circle, #1c1f24 0%, #000 100%);
            margin: 20px auto; display: flex; align-items: center; justify-content: center;
            position: relative; transition: 0.5s; cursor: pointer;
        }
        .is-mining { border-color: var(--gold); animation: pulse-gold 2s infinite; }
        @keyframes pulse-gold { 0% { box-shadow: 0 0 0 0 rgba(243,186,47,0.4); } 70% { box-shadow: 0 0 0 25px rgba(243,186,47,0); } 100% { box-shadow: 0 0 0 0 rgba(243,186,47,0); } }

        /* ÙƒØ±ÙˆØª Ø§Ù„ØªØ·ÙˆÙŠØ± (Mining Market) */
        .market-title { width: 100%; text-align: left; font-size: 16px; font-weight: 900; color: var(--gold); margin: 20px 0 10px; }
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; width: 100%; }
        .card { background: var(--card); border: 1px solid #333; border-radius: 20px; padding: 15px; position: relative; transition: 0.3s; }
        .card:active { transform: scale(0.96); }
        .card h4 { margin: 0; font-size: 14px; }
        .card p { margin: 5px 0; font-size: 11px; color: #888; }
        .upgrade-btn { background: var(--gold); border: none; width: 100%; padding: 8px; border-radius: 10px; font-weight: 900; cursor: pointer; margin-top: 10px; }

        /* Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© */
        .btn-action { background: linear-gradient(90deg, #f3ba2f, #8a6d1f); border: none; padding: 16px; border-radius: 18px; color: black; font-weight: 900; font-size: 18px; width: 100%; cursor: pointer; margin-top: 10px; }
        .btn-action:disabled { background: #222; color: #555; }

        /* Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø³ÙÙ„ÙŠØ© */
        .nav { position: fixed; bottom: 15px; left: 15px; right: 15px; background: rgba(28,31,36,0.9); backdrop-filter: blur(15px); border-radius: 25px; display: flex; justify-content: space-around; padding: 15px; border: 1px solid #333; }
        .nav-item { color: #555; font-size: 11px; font-weight: bold; cursor: pointer; transition: 0.3s; }
        .nav-item.active { color: var(--gold); transform: translateY(-3px); }
    </style>
</head>
<body>

<div id="toast"></div>

<div class="app">
    <div class="header">
        <div class="u-box">
            <img id="u-img" src="">
            <span id="u-display" style="font-size:12px; font-weight:900;">Mugahed</span>
        </div>
        <div id="ton-connect-button"></div>
    </div>

    <div id="mining" class="screen active">
        <small style="color:#888; letter-spacing: 1px;">GOLDEN CLAIM BALANCE</small>
        <div class="bal-txt" id="main-bal">0.0000</div>

        <div id="circle" class="mine-circle">
            <div id="circle-status" style="font-weight:900; color:#444; font-size: 20px;">IDLE</div>
        </div>

        <div id="timer-txt" style="color:var(--gold); font-weight:bold; height:20px; margin-bottom:10px;">Ready to start</div>
        <button id="start-btn" class="btn-action" onclick="handleMining()">START MINING</button>

        <div class="market-title">Upgrades & Boosts</div>
        <div class="grid">
            <div class="card">
                <h4>â›ï¸ Liquid Gold</h4>
                <p>Speed: +0.05/h</p>
                <div style="color:var(--gold); font-weight:900; font-size:12px;" id="speed-cost">Cost: 10.0</div>
                <button class="upgrade-btn" onclick="buyBoost('speed', 10, 0.05)">Upgrade</button>
            </div>
            <div class="card">
                <h4>â³ Storage</h4>
                <p>Time: +2 Hours</p>
                <div style="color:var(--gold); font-weight:900; font-size:12px;" id="time-cost">Cost: 25.0</div>
                <button class="upgrade-btn" onclick="buyBoost('time', 25, 2)">Upgrade</button>
            </div>
        </div>
    </div>

    <div id="wallet" class="screen">
        <div class="card" style="width:100%; text-align:center; padding:40px 20px;">
            <div style="font-size:50px; margin-bottom:10px;">ğŸ¦</div>
            <h2>Withdraw</h2>
            <div class="bal-txt" id="with-bal" style="color:var(--gold)">0.0000</div>
            <p style="color:#888;">Min withdraw: 100.00 Gold</p>
            <button class="btn-action" onclick="showToast('Withdrawal request logged!')">SUBMIT REQUEST</button>
        </div>
    </div>

    <nav class="nav">
        <div class="nav-item active" onclick="tab('mining', this)">Mining</div>
        <div class="nav-item" onclick="tab('wallet', this)">Wallet</div>
    </nav>
</div>

<script>
    const tg = window.Telegram.WebApp;
    tg.expand();

    // Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù…Ø­ÙØ¸Ø© Ø§Ù„Ø±Ø³Ù…ÙŠ Ù…Ø¹ Manifest Ø¹Ø§Ù… ÙŠØ¹Ù…Ù„ ÙÙŠ Replit
    const tonConnectUI = new TON_CONNECT_UI.TonConnectUI({
        manifestUrl: 'https://raw.githubusercontent.com/ton-community/tutorials/main/03-client/test/public/tonconnect-manifest.json',
        buttonRootId: 'ton-connect-button'
    });

    let bal = parseFloat(localStorage.getItem('m_bal')) || 0;
    let rate = parseFloat(localStorage.getItem('m_rate')) || 0.01;
    let hours = parseInt(localStorage.getItem('m_hours')) || 6;
    let end = localStorage.getItem('m_end') || null;

    function showToast(m) {
        const t = document.getElementById('toast');
        t.innerText = m; t.style.display = 'block';
        setTimeout(() => t.style.display = 'none', 3000);
    }

    function sync() {
        document.getElementById('main-bal').innerText = bal.toFixed(4);
        document.getElementById('with-bal').innerText = bal.toFixed(4);
        document.getElementById('u-display').innerText = tg.initDataUnsafe.user?.first_name || "Mugahed";
        document.getElementById('u-img').src = tg.initDataUnsafe.user?.photo_url || "https://via.placeholder.com/28";
        localStorage.setItem('m_bal', bal);
    }

    function handleMining() {
        if (!end) {
            end = Date.now() + (hours * 3600000);
            localStorage.setItem('m_end', end);
            showToast("Mining Initiated! ğŸš€");
        } else if (Date.now() >= end) {
            bal += (rate * hours);
            end = null;
            localStorage.removeItem('m_end');
            showToast("Reward Claimed! ğŸ’°");
            sync();
        }
    }

    function buyBoost(type, cost, power) {
        if(bal >= cost) {
            bal -= cost;
            if(type === 'speed') rate += power;
            else hours += power;
            sync();
            showToast("System Upgraded! âœ¨");
        } else {
            showToast("Insufficient Balance! âŒ");
        }
    }

    function loop() {
        const circle = document.getElementById('circle');
        const status = document.getElementById('circle-status');
        const btn = document.getElementById('start-btn');
        const timer = document.getElementById('timer-txt');

        if (end) {
            const diff = end - Date.now();
            if (diff > 0) {
                circle.classList.add('is-mining');
                status.innerText = "MINING...";
                status.style.color = "var(--gold)";
                btn.disabled = true;
                const h = Math.floor(diff/3600000);
                const m = Math.floor((diff%3600000)/60000);
                timer.innerText = `Work ends in: ${h}h ${m}m`;
            } else {
                circle.classList.remove('is-mining');
                status.innerText = "CLAIM";
                status.style.color = "var(--green)";
                btn.disabled = false;
                btn.innerText = "CLAIM REWARD";
                timer.innerText = "Tanks Full! Claim now.";
            }
        } else {
            circle.classList.remove('is-mining');
            status.innerText = "IDLE";
            status.style.color = "#444";
            btn.disabled = false;
            btn.innerText = "START MINING";
            timer.innerText = "Ready to start";
        }
    }

    function tab(id, el) {
        document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
        document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        el.classList.add('active');
    }

    setInterval(loop, 1000);
    sync();
</script>
</body>
</html>

