<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Golden Claim Bot</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://unpkg.com/@tonconnect/ui@latest/dist/tonconnect-ui.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root { --gold: #f3ba2f; --bg: #000000; --card: #151515; }
        body { margin: 0; background: var(--bg); color: white; font-family: 'Cairo', sans-serif; direction: rtl; overflow: hidden; }
        
        /* Ø§Ù„Ù‡ÙŠØ¯Ø±: Ø¥ØµÙ„Ø§Ø­ Ø§Ù„Ø§Ø³Ù… ÙˆØ§Ù„ØµÙˆØ±Ø© */
        .header { display: flex; justify-content: space-between; align-items: center; padding: 15px; background: #0a0a0a; border-bottom: 1px solid #222; }
        .user-info { display: flex; align-items: center; gap: 10px; }
        .user-info img { width: 35px; height: 35px; border-radius: 50%; border: 1.5px solid var(--gold); background: #222; }
        .user-info span { font-weight: 700; font-size: 14px; }
        
        /* Ø²Ø± Ø§Ù„Ù…Ø­ÙØ¸Ø© Ø§Ù„Ù…ØµÙ„Ø­ */
        #ton-connect-button { transform: scale(0.9); }

        .app-content { height: calc(100vh - 140px); overflow-y: auto; padding: 20px; text-align: center; }
        .screen { display: none; }
        .screen.active { display: block; }

        /* Ù…Ù†Ø·Ù‚Ø© Ø§Ù„ØªØ¹Ø¯ÙŠÙ† */
        .balance-title { color: #888; font-size: 14px; margin-bottom: 5px; }
        .balance-value { font-size: 48px; font-weight: 900; color: #fff; margin-bottom: 20px; }

        .mining-btn {
            width: 200px; height: 200px; border-radius: 50%; background: radial-gradient(circle, #222 0%, #000 100%);
            border: 8px solid #1a1a1a; margin: 20px auto; display: flex; align-items: center; justify-content: center;
            cursor: pointer; position: relative; transition: 0.3s;
        }
        .mining-btn.active { border-color: var(--gold); box-shadow: 0 0 30px rgba(243, 186, 47, 0.2); }
        .mining-btn img { width: 120px; }

        /* Ø§Ù„ÙƒØ±ÙˆØª */
        .cards-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 20px; }
        .card { background: var(--card); border: 1px solid #222; border-radius: 15px; padding: 15px; transition: 0.2s; }
        .card:active { transform: scale(0.95); }
        .card h4 { margin: 0 0 5px; font-size: 14px; color: var(--gold); }
        .card p { margin: 0 0 10px; font-size: 11px; color: #aaa; }
        .card button { background: #252525; color: white; border: 1px solid #333; width: 100%; padding: 6px; border-radius: 8px; font-weight: bold; }

        /* Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡ */
        #toast { position: fixed; bottom: 100px; left: 50%; transform: translateX(-50%); background: var(--gold); color: black; padding: 8px 20px; border-radius: 20px; font-weight: bold; display: none; z-index: 1000; }

        /* Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø³ÙÙ„ÙŠØ© */
        .navbar { position: fixed; bottom: 0; width: 100%; background: #0a0a0a; display: flex; justify-content: space-around; padding: 15px 0; border-top: 1px solid #222; }
        .nav-item { color: #555; text-align: center; cursor: pointer; flex: 1; transition: 0.3s; }
        .nav-item.active { color: var(--gold); }
        .nav-item div { font-size: 10px; margin-top: 4px; font-weight: bold; }
    </style>
</head>
<body>

<div id="toast">ØªÙ… Ø§Ù„Ù†Ø³Ø®! ğŸš€</div>

<div class="header">
    <div class="user-info">
        <img id="user-pic" src="">
        <span id="user-name">ØªØ­Ù…ÙŠÙ„...</span>
    </div>
    <div id="ton-connect-button"></div>
</div>

<div class="app-content">
    <div id="mine-screen" class="screen active">
        <div class="balance-title">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø°Ù‡Ø¨</div>
        <div class="balance-value" id="user-balance">0.0000</div>

        <div id="main-circle" class="mining-btn" onclick="startMining()">
            <img src="https://cdn-icons-png.flaticon.com/512/6585/6585012.png" alt="coin">
        </div>
        
        <div id="status-timer" style="color:var(--gold); font-weight:bold; margin-top:10px;">Ø¬Ø§Ù‡Ø² Ù„Ù„ØªØ¹Ø¯ÙŠÙ†</div>

        <div class="cards-grid">
            <div class="card">
                <h4>Ø³Ø±Ø¹Ø© Ø§Ù„ØªØ¹Ø¯ÙŠÙ†</h4>
                <p>+0.05/Ø³Ø§Ø¹Ø©</p>
                <button onclick="upgrade('speed', 10)">10 Ø°Ù‡Ø¨</button>
            </div>
            <div class="card">
                <h4>Ø³Ø¹Ø© Ø§Ù„Ø®Ø²Ø§Ù†</h4>
                <p>+2 Ø³Ø§Ø¹Ø©</p>
                <button onclick="upgrade('limit', 20)">20 Ø°Ù‡Ø¨</button>
            </div>
        </div>
    </div>

    <div id="friends-screen" class="screen">
        <h2>Ø¯Ø¹ÙˆØ© Ø§Ù„Ø£ØµØ¯Ù‚Ø§Ø¡</h2>
        <div class="card" style="margin-top:20px; padding:30px;">
            <p>Ø§Ø±Ø¨Ø­ 50,000 Ø¹Ù† ÙƒÙ„ ØµØ¯ÙŠÙ‚!</p>
            <button onclick="copyInvite()" style="background:var(--gold); color:black; padding:15px;">Ù†Ø³Ø® Ø±Ø§Ø¨Ø· Ø§Ù„Ø¯Ø¹ÙˆØ© ğŸ”—</button>
        </div>
    </div>

    <div id="wallet-screen" class="screen">
        <h2>Ø§Ù„Ù…Ø­ÙØ¸Ø© Ø§Ù„Ø±Ù‚Ù…ÙŠØ©</h2>
        <div class="card" style="padding:40px 20px;">
            <div style="font-size:40px; margin-bottom:10px;">ğŸ’°</div>
            <div class="balance-value" id="wallet-balance">0.0000</div>
            <p>Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ Ù„Ù„Ø³Ø­Ø¨: 100 Ø°Ù‡Ø¨</p>
            <button onclick="alert('Ø³ÙŠØªÙ… ÙØªØ­ Ø§Ù„Ø³Ø­Ø¨ Ù‚Ø±ÙŠØ¨Ø§Ù‹!')" style="width:100%; padding:15px; background:var(--gold); color:black;">Ø·Ù„Ø¨ Ø³Ø­Ø¨</button>
        </div>
    </div>
</div>

<div class="navbar">
    <div class="nav-item active" onclick="switchTab('mine-screen', this)">
        <span>â›ï¸</span><div>Ø§Ù„ØªØ¹Ø¯ÙŠÙ†</div>
    </div>
    <div class="nav-item" onclick="switchTab('friends-screen', this)">
        <span>ğŸ‘¥</span><div>Ø§Ù„Ø£ØµØ¯Ù‚Ø§Ø¡</div>
    </div>
    <div class="nav-item" onclick="switchTab('wallet-screen', this)">
        <span>ğŸ‘›</span><div>Ø§Ù„Ù…Ø­ÙØ¸Ø©</div>
    </div>
</div>

<script>
    const tg = window.Telegram.WebApp;
    tg.expand();

    // 1. Ø¥ØµÙ„Ø§Ø­ Ø§Ù„Ù…Ø­ÙØ¸Ø© (Manifest ÙŠØ¹Ù…Ù„ 100% Ø¯Ø§Ø®Ù„ ØªÙ„ÙŠØ¬Ø±Ø§Ù…)
    const tonConnectUI = new TON_CONNECT_UI.TonConnectUI({
        manifestUrl: 'https://raw.githubusercontent.com/ton-community/tutorials/main/03-client/test/public/tonconnect-manifest.json',
        buttonRootId: 'ton-connect-button'
    });

    // 2. Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
    let balance = parseFloat(localStorage.getItem('gold_bal')) || 0;
    let speed = parseFloat(localStorage.getItem('gold_speed')) || 0.01;
    let limit = parseInt(localStorage.getItem('gold_limit')) || 6;
    let endTime = localStorage.getItem('gold_end');

    // 3. ØªØ­Ø¯ÙŠØ« ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… (Ø§Ù„Ø§Ø³Ù… ÙˆØ§Ù„ØµÙˆØ±Ø©)
    function initUser() {
        document.getElementById('user-name').innerText = tg.initDataUnsafe.user?.first_name || "Ù…Ø³ØªØ®Ø¯Ù…";
        document.getElementById('user-pic').src = tg.initDataUnsafe.user?.photo_url || "https://ui-avatars.com/api/?name=User";
        updateDisplay();
    }

    function updateDisplay() {
        document.getElementById('user-balance').innerText = balance.toFixed(4);
        document.getElementById('wallet-balance').innerText = balance.toFixed(4);
        localStorage.setItem('gold_bal', balance);
        localStorage.setItem('gold_speed', speed);
        localStorage.setItem('gold_limit', limit);
    }

    // 4. Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ¹Ø¯ÙŠÙ†
    function startMining() {
        if (!endTime) {
            endTime = Date.now() + (limit * 3600000);
            localStorage.setItem('gold_end', endTime);
            tg.HapticFeedback.impactOccurred('medium');
        } else if (Date.now() >= endTime) {
            balance += (speed * limit);
            endTime = null;
            localStorage.removeItem('gold_end');
            tg.HapticFeedback.notificationOccurred('success');
            updateDisplay();
        }
    }

    function checkLoop() {
        const status = document.getElementById('status-timer');
        const circle = document.getElementById('main-circle');
        
        if (endTime) {
            const diff = endTime - Date.now();
            if (diff > 0) {
                circle.classList.add('active');
                const h = Math.floor(diff/3600000);
                const m = Math.floor((diff%3600000)/60000);
                status.innerText = `Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ¹Ø¯ÙŠÙ†: ${h}Ø³ ${m}Ø¯`;
            } else {
                circle.classList.remove('active');
                status.innerText = "Ø§Ø¬Ù…Ø¹ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­! âœ¨";
            }
        } else {
            circle.classList.remove('active');
            status.innerText = "Ø¬Ø§Ù‡Ø² Ù„Ù„ØªØ¹Ø¯ÙŠÙ†";
        }
    }

    // 5. Ø§Ù„ØªØ·ÙˆÙŠØ±Ø§Øª ÙˆØ§Ù„Ø¯Ø¹ÙˆØ©
    function upgrade(type, cost) {
        if(balance >= cost) {
            balance -= cost;
            if(type === 'speed') speed += 0.05;
            else limit += 2;
            updateDisplay();
            alert("ØªÙ… Ø§Ù„ØªØ·ÙˆÙŠØ±!");
        } else {
            alert("Ø±ØµÙŠØ¯ ØºÙŠØ± ÙƒØ§ÙÙ!");
        }
    }

    function copyInvite() {
        const link = `https://t.me/GoldenClaim_Bot?start=${tg.initDataUnsafe.user?.id}`;
        navigator.clipboard.writeText(link);
        const t = document.getElementById('toast');
        t.style.display = 'block';
        setTimeout(() => t.style.display = 'none', 2000);
    }

    // 6. Ø§Ù„ØªÙ†Ù‚Ù„ Ø¨ÙŠÙ† Ø§Ù„ØµÙØ­Ø§Øª
    function switchTab(screenId, el) {
        document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
        document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
        document.getElementById(screenId).classList.add('active');
        el.classList.add('active');
    }

    setInterval(checkLoop, 1000);
    initUser();
</script>
</body>
</html>

