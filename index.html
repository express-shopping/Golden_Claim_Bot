<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Golden Claim | Pro</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://unpkg.com/@tonconnect/ui@latest/dist/tonconnect-ui.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root { --gold: #f3ba2f; --bg: #000; --card: #151515; --btn: #222; }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { margin: 0; background: var(--bg); color: white; font-family: 'Cairo', sans-serif; overflow: hidden; }
        
        /* Header */
        .header { display: flex; justify-content: space-between; align-items: center; padding: 12px 15px; background: #0a0a0a; border-bottom: 1px solid #222; }
        .u-profile { display: flex; align-items: center; gap: 10px; }
        #u-avatar { width: 35px; height: 35px; border-radius: 50%; border: 1.5px solid var(--gold); }
        #ton-btn { transform: scale(0.85); transform-origin: left; }

        /* Main Content */
        .content { height: calc(100vh - 140px); overflow-y: auto; padding: 20px; text-align: center; }
        .page { display: none; }
        .page.active { display: block; }

        /* Mining UI */
        .bal-container { margin: 10px 0; }
        .bal-val { font-size: 45px; font-weight: 900; text-shadow: 0 0 15px rgba(243,186,47,0.3); }
        
        .mine-circle {
            width: 210px; height: 210px; border-radius: 50%;
            background: radial-gradient(circle, #222 0%, #000 100%);
            border: 8px solid #1a1a1a; margin: 25px auto;
            display: flex; align-items: center; justify-content: center;
            cursor: pointer; position: relative; transition: 0.2s;
        }
        .mine-circle:active { transform: scale(0.95); }
        .mining-active { border-color: var(--gold); animation: pulse 2s infinite; }
        @keyframes pulse { 0% { box-shadow: 0 0 0 0 rgba(243,186,47,0.4); } 70% { box-shadow: 0 0 0 25px rgba(243,186,47,0); } 100% { box-shadow: 0 0 0 0 rgba(243,186,47,0); } }
        .mine-circle img { width: 120px; }

        /* Upgrades & Tasks */
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-top: 20px; }
        .card { background: var(--card); border: 1px solid #222; border-radius: 18px; padding: 15px; text-align: center; }
        .card h4 { margin: 0; font-size: 13px; color: var(--gold); }
        .card p { margin: 5px 0; font-size: 10px; color: #888; }
        .card-btn { background: var(--btn); color: white; border: 1px solid #333; width: 100%; padding: 8px; border-radius: 10px; font-weight: bold; cursor: pointer; }

        /* Navigation */
        .nav { position: fixed; bottom: 0; width: 100%; background: #0a0a0a; display: flex; border-top: 1px solid #222; padding: 12px 0; z-index: 1000; }
        .nav-item { flex: 1; text-align: center; color: #555; cursor: pointer; font-size: 12px; font-weight: bold; }
        .nav-item.active { color: var(--gold); }
        .nav-item i { display: block; font-size: 20px; margin-bottom: 2px; }

        /* Toast */
        #msg { position: fixed; bottom: 100px; left: 50%; transform: translateX(-50%); background: var(--gold); color: #000; padding: 10px 25px; border-radius: 50px; font-weight: 900; display: none; z-index: 2000; }
    </style>
</head>
<body>

<div id="msg"></div>

<div class="header">
    <div id="ton-btn"></div>
    <div class="u-profile">
        <span id="u-name" style="font-size: 14px; font-weight: bold;">ØªØ­Ù…ÙŠÙ„...</span>
        <img id="u-avatar" src="https://ui-avatars.com/api/?name=G">
    </div>
</div>

<div class="content">
    <div id="p-mine" class="page active">
        <div class="bal-container">
            <small style="color:#888">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø±ØµÙŠØ¯</small>
            <div class="bal-val" id="bal">0.0000</div>
        </div>

        <div id="main-circle" class="mine-circle" onclick="mineAction()">
            <img src="https://cdn-icons-png.flaticon.com/512/6585/6585012.png">
        </div>

        <div id="timer" style="color:var(--gold); font-weight:900; margin-bottom: 20px;">Ø¬Ø§Ù‡Ø² Ù„Ù„ØªØ¹Ø¯ÙŠÙ†</div>

        <div class="grid">
            <div class="card">
                <h4>Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬ Ø§Ù„Ø³Ø±Ø¹Ø©</h4>
                <p>+0.05 / Ø³Ø§Ø¹Ø©</p>
                <button class="card-btn" onclick="buy('s', 10)">10 Ø°Ù‡Ø¨</button>
            </div>
            <div class="card">
                <h4>Ø®Ø²Ø§Ù† Ø§Ù„Ø·Ø§Ù‚Ø©</h4>
                <p>+2 Ø³Ø§Ø¹Ø© ØªØ¹Ø¯ÙŠÙ†</p>
                <button class="card-btn" onclick="buy('t', 20)">20 Ø°Ù‡Ø¨</button>
            </div>
        </div>
    </div>

    <div id="p-tasks" class="page">
        <h3>Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„ÙŠÙˆÙ…ÙŠØ© ğŸ“‹</h3>
        <div class="card" style="margin-bottom: 10px; display: flex; justify-content: space-between; align-items: center;">
            <div style="text-align: right;">
                <h4>Ø§Ù†Ø¶Ù… Ù„Ù‚Ù†Ø§ØªÙ†Ø§</h4>
                <p>+5,000 Ø°Ù‡Ø¨</p>
            </div>
            <button class="card-btn" style="width: 80px;" onclick="doTask(5000)">Ø¨Ø¯Ø¡</button>
        </div>
        <div class="card" style="display: flex; justify-content: space-between; align-items: center;">
            <div style="text-align: right;">
                <h4>Ø¯Ø¹ÙˆØ© ØµØ¯ÙŠÙ‚</h4>
                <p>+10,000 Ø°Ù‡Ø¨</p>
            </div>
            <button class="card-btn" style="width: 80px;" onclick="copyLink()">Ù†Ø³Ø®</button>
        </div>
    </div>

    <div id="p-wallet" class="page">
        <h3>Ø§Ù„Ù…Ø­ÙØ¸Ø© ğŸ‘›</h3>
        <div class="card" style="padding: 40px 10px;">
            <div class="bal-val" id="w-bal" style="color:var(--gold)">0.0000</div>
            <p>Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ Ù„Ù„Ø³Ø­Ø¨: 100 Ø°Ù‡Ø¨</p>
            <button class="card-btn" style="background:var(--gold); color:#000; padding:15px;" onclick="toast('Ø§Ù„Ø³Ø­Ø¨ Ø³ÙŠÙØªØ­ Ù‚Ø±ÙŠØ¨Ø§Ù‹!')">Ø·Ù„Ø¨ Ø³Ø­Ø¨ Ø§Ù„Ø±ØµÙŠØ¯</button>
        </div>
    </div>
</div>

<div class="nav">
    <div class="nav-item active" onclick="tab('p-mine', this)"><i>â›ï¸</i>ØªØ¹Ø¯ÙŠÙ†</div>
    <div class="nav-item" onclick="tab('p-tasks', this)"><i>ğŸ“‹</i>Ù…Ù‡Ø§Ù…</div>
    <div class="nav-item" onclick="tab('p-wallet', this)"><i>ğŸ‘›</i>Ù…Ø­ÙØ¸Ø©</div>
</div>

<script>
    const tg = window.Telegram.WebApp;
    tg.expand();

    // Ø¥ØµÙ„Ø§Ø­ Ø§Ù„Ù…Ø­ÙØ¸Ø©
    const tonConnect = new TON_CONNECT_UI.TonConnectUI({
        manifestUrl: 'https://raw.githubusercontent.com/ton-community/tutorials/main/03-client/test/public/tonconnect-manifest.json',
        buttonRootId: 'ton-btn'
    });

    // Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
    let bal = parseFloat(localStorage.getItem('g_bal')) || 0;
    let speed = parseFloat(localStorage.getItem('g_speed')) || 0.01;
    let time = parseInt(localStorage.getItem('g_time')) || 6;
    let end = localStorage.getItem('g_end');

    function toast(m) {
        const x = document.getElementById('msg');
        x.innerText = m; x.style.display = 'block';
        setTimeout(() => x.style.display = 'none', 2500);
    }

    function sync() {
        document.getElementById('bal').innerText = bal.toFixed(4);
        document.getElementById('w-bal').innerText = bal.toFixed(4);
        document.getElementById('u-name').innerText = tg.initDataUnsafe.user?.first_name || "Ù…Ø³ØªØ®Ø¯Ù…";
        document.getElementById('u-avatar').src = tg.initDataUnsafe.user?.photo_url || "https://ui-avatars.com/api/?name=G";
        localStorage.setItem('g_bal', bal);
        localStorage.setItem('g_speed', speed);
        localStorage.setItem('g_time', time);
    }

    function mineAction() {
        if (!end) {
            end = Date.now() + (time * 3600000);
            localStorage.setItem('g_end', end);
            tg.HapticFeedback.impactOccurred('medium');
            toast("Ø¨Ø¯Ø£ Ø§Ù„ØªØ¹Ø¯ÙŠÙ†! ğŸš€");
        } else if (Date.now() >= end) {
            bal += (speed * time);
            end = null;
            localStorage.removeItem('g_end');
            tg.HapticFeedback.notificationOccurred('success');
            toast("ØªÙ… Ø¬Ù…Ø¹ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­! ğŸ’°");
        }
        sync();
    }

    function loop() {
        const timer = document.getElementById('timer');
        const circle = document.getElementById('main-circle');
        if (end) {
            let diff = end - Date.now();
            if (diff > 0) {
                circle.classList.add('mining-active');
                let h = Math.floor(diff/3600000);
                let m = Math.floor((diff%3600000)/60000);
                timer.innerText = `Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¹Ù…Ù„: ${h}Ø³ Ùˆ ${m}Ø¯`;
            } else {
                circle.classList.remove('mining-active');
                timer.innerText = "Ø§Ø¬Ù…Ø¹ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­ Ø§Ù„Ø¢Ù†! âœ¨";
            }
        } else {
            circle.classList.remove('mining-active');
            timer.innerText = "Ø¬Ø§Ù‡Ø² Ù„Ù„ØªØ¹Ø¯ÙŠÙ†";
        }
    }

    function buy(type, cost) {
        if (bal >= cost) {
            bal -= cost;
            if (type === 's') speed += 0.05; else time += 2;
            sync();
            toast("ØªÙ… Ø§Ù„ØªØ·ÙˆÙŠØ± Ø¨Ù†Ø¬Ø§Ø­! ğŸ”¥");
        } else toast("Ø§Ù„Ø±ØµÙŠØ¯ ØºÙŠØ± ÙƒØ§ÙÙ! âŒ");
    }

    function tab(id, el) {
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
        document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        el.classList.add('active');
    }

    function doTask(reward) {
        toast("Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù‚Ù‚...");
        setTimeout(() => {
            bal += reward;
            sync();
            toast("ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…ÙƒØ§ÙØ£Ø©! ğŸ");
        }, 2000);
    }

    function copyLink() {
        const link = `https://t.me/GoldenClaim_Bot?start=${tg.initDataUnsafe.user?.id || '123'}`;
        navigator.clipboard.writeText(link);
        toast("ØªÙ… Ù†Ø³Ø® Ø±Ø§Ø¨Ø· Ø§Ù„Ø¯Ø¹ÙˆØ©! ğŸ”—");
    }

    setInterval(loop, 1000);
    sync();
</script>
</body>
</html>

