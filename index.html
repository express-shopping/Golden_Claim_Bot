<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Golden Claim Bot</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://unpkg.com/@tonconnect/ui@latest/dist/tonconnect-ui.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">
    
    <style>
        :root { --gold: #f3ba2f; --bg: #000; --card: #111; --text: #fff; }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { margin: 0; background: var(--bg); color: var(--text); font-family: 'Cairo', sans-serif; overflow: hidden; }
        
        .header { display: flex; justify-content: space-between; align-items: center; padding: 10px 15px; background: #080808; border-bottom: 1px solid #222; position: sticky; top: 0; z-index: 100; }
        .u-info { display: flex; align-items: center; gap: 8px; }
        #u-pic { width: 32px; height: 32px; border-radius: 50%; border: 1px solid var(--gold); background: #222; }
        #u-name { font-size: 13px; font-weight: bold; }

        .content { height: calc(100vh - 130px); overflow-y: auto; padding: 20px; text-align: center; }
        .page { display: none; width: 100%; animation: fadeIn 0.3s ease; }
        .page.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* ÿßŸÑÿ™ÿπÿØŸäŸÜ */
        .bal-val { font-size: 45px; font-weight: 900; color: #fff; margin: 10px 0; letter-spacing: 1px; }
        .main-btn { 
            width: 200px; height: 200px; border-radius: 50%; background: radial-gradient(circle, #1a1a1a 0%, #000 100%);
            border: 6px solid #1a1a1a; margin: 25px auto; display: flex; align-items: center; justify-content: center;
            cursor: pointer; transition: transform 0.1s; position: relative;
        }
        .main-btn:active { transform: scale(0.95); }
        .main-btn.mining { border-color: var(--gold); box-shadow: 0 0 25px rgba(243,186,47,0.25); }
        .main-btn img { width: 110px; pointer-events: none; }

        .cards { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-top: 20px; }
        .card { background: var(--card); border: 1px solid #222; border-radius: 16px; padding: 12px; }
        .card h4 { margin: 0; font-size: 13px; color: var(--gold); }
        .card p { margin: 4px 0; font-size: 10px; color: #888; }
        .card button { background: #1a1a1a; color: #fff; border: 1px solid #333; width: 100%; padding: 6px; border-radius: 8px; font-size: 11px; font-weight: bold; cursor: pointer; }

        /* ÿßŸÑŸÇÿßÿ¶ŸÖÿ© */
        .nav { position: fixed; bottom: 0; width: 100%; background: #080808; display: flex; border-top: 1px solid #222; padding: 10px 0; }
        .n-item { flex: 1; text-align: center; color: #555; cursor: pointer; font-size: 11px; font-weight: bold; }
        .n-item.active { color: var(--gold); }
        .n-item span { display: block; font-size: 18px; }
    </style>
</head>
<body>

    <div class="header">
        <div class="u-info">
            <img id="u-pic" src="https://via.placeholder.com/32">
            <span id="u-name">Loading...</span>
        </div>
        <div id="ton-connect-button"></div>
    </div>

    <div class="content">
        <div id="p-mine" class="page active">
            <div style="color:#777; font-size: 12px;">AVAILABLE ASSETS</div>
            <div class="bal-val" id="bal">0.0000</div>
            
            <div id="circle" class="main-btn" onclick="handleAction()">
                <img src="https://cdn-icons-png.flaticon.com/512/6585/6585012.png">
            </div>
            
            <div id="timer" style="color:var(--gold); font-weight:bold; font-size:14px;">READY TO START</div>
            <button id="action-btn" onclick="handleAction()" style="display:none;"></button>

            <div class="cards">
                <div class="card">
                    <h4>Speed Boost</h4>
                    <p>+0.05/h Rate</p>
                    <button onclick="buy('s')">Cost: 10 Gold</button>
                </div>
                <div class="card">
                    <h4>Time Boost</h4>
                    <p>+2h Storage</p>
                    <button onclick="buy('t')">Cost: 20 Gold</button>
                </div>
            </div>
        </div>

        <div id="p-friends" class="page">
            <h3>Invite Friends</h3>
            <div class="card" style="padding:30px;">
                <p>Earn +50,000 Gold per friend!</p>
                <button onclick="copy()" style="padding:15px; background:var(--gold); color:#000;">COPY LINK üîó</button>
            </div>
        </div>

        <div id="p-wallet" class="page">
            <h3>Digital Wallet</h3>
            <div class="card" style="padding:40px 10px;">
                <div class="bal-val" id="w-bal" style="color:var(--gold)">0.0000</div>
                <p>Min Withdrawal: 100 Gold</p>
                <button onclick="alert('Withdrawal starts soon!')" style="padding:12px; background:var(--gold); color:#000;">WITHDRAW ASSETS</button>
            </div>
        </div>
    </div>

    <div class="nav">
        <div class="n-item active" onclick="tab('p-mine', this)"><span>‚õèÔ∏è</span>Mine</div>
        <div class="n-item" onclick="tab('p-friends', this)"><span>üë•</span>Friends</div>
        <div class="n-item" onclick="tab('p-wallet', this)"><span>üëõ</span>Wallet</div>
    </div>

<script>
    // ÿ™ŸáŸäÿ¶ÿ© ÿ™ŸÑŸäÿ¨ÿ±ÿßŸÖ ŸàÿßŸÑŸÖÿ≠ŸÅÿ∏ÿ©
    const tg = window.Telegram.WebApp;
    tg.expand();

    const tonConnect = new TON_CONNECT_UI.TonConnectUI({
        manifestUrl: 'https://raw.githubusercontent.com/ton-community/tutorials/main/03-client/test/public/tonconnect-manifest.json',
        buttonRootId: 'ton-connect-button'
    });

    // ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ (ÿ™ÿÆÿ≤ŸäŸÜ ŸÖÿ≠ŸÑŸä)
    let bal = parseFloat(localStorage.getItem('g_bal')) || 0;
    let rate = parseFloat(localStorage.getItem('g_rate')) || 0.01;
    let hrs = parseInt(localStorage.getItem('g_hrs')) || 6;
    let end = localStorage.getItem('g_end');

    // ÿπÿ±ÿ∂ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™
    function sync() {
        document.getElementById('u-name').innerText = tg.initDataUnsafe.user?.first_name || "Mugahed";
        document.getElementById('u-pic').src = tg.initDataUnsafe.user?.photo_url || "https://ui-avatars.com/api/?name=M";
        document.getElementById('bal').innerText = bal.toFixed(4);
        document.getElementById('w-bal').innerText = bal.toFixed(4);
        localStorage.setItem('g_bal', bal);
        localStorage.setItem('g_rate', rate);
        localStorage.setItem('g_hrs', hrs);
    }

    // ÿ•ÿØÿßÿ±ÿ© ÿßŸÑÿ™ÿπÿØŸäŸÜ
    function handleAction() {
        if (!end) {
            end = Date.now() + (hrs * 3600000);
            localStorage.setItem('g_end', end);
            tg.HapticFeedback.impactOccurred('medium');
        } else if (Date.now() >= end) {
            bal += (rate * hrs);
            end = null;
            localStorage.removeItem('g_end');
            tg.HapticFeedback.notificationOccurred('success');
        }
        sync();
    }

    function loop() {
        const timer = document.getElementById('timer');
        const circle = document.getElementById('circle');
        if (end) {
            let diff = end - Date.now();
            if (diff > 0) {
                circle.classList.add('mining');
                let h = Math.floor(diff/3600000);
                let m = Math.floor((diff%3600000)/60000);
                timer.innerText = `MINING: ${h}h ${m}m LEFT`;
            } else {
                circle.classList.remove('mining');
                timer.innerText = "CLAIM YOUR GOLD! ‚ú®";
            }
        } else {
            circle.classList.remove('mining');
            timer.innerText = "READY TO START";
        }
    }

    function buy(type) {
        let cost = (type === 's') ? 10 : 20;
        if (bal >= cost) {
            bal -= cost;
            if (type === 's') rate += 0.05; else hrs += 2;
            sync();
            alert("Upgrade Successful!");
        } else alert("Not enough Gold!");
    }

    function tab(id, el) {
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
        document.querySelectorAll('.n-item').forEach(n => n.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        el.classList.add('active');
    }

    function copy() {
        const link = `https://t.me/GoldenClaim_Bot?start=${tg.initDataUnsafe.user?.id || 'user'}`;
        navigator.clipboard.writeText(link).then(() => alert("Link Copied!"));
    }

    setInterval(loop, 1000);
    sync();
</script>
</body>
</html>

