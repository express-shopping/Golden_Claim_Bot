<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Golden Claim | Pro Max</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://unpkg.com/@tonconnect/ui@latest/dist/tonconnect-ui.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root { --gold: #f3ba2f; --bg: #0b0e11; --card: #1c1f24; --green: #00ff88; }
        body { margin: 0; background: var(--bg); color: white; font-family: 'Montserrat', sans-serif; overflow: hidden; height: 100vh; }
        
        /* ÿ™ÿµŸÖŸäŸÖ ÿßŸÑÿ™ŸÜÿ®ŸäŸáÿßÿ™ ÿßŸÑÿ±ÿßŸÇŸä */
        #toast { position: fixed; bottom: 100px; left: 50%; transform: translateX(-50%); background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(15px); padding: 12px 25px; border-radius: 50px; border: 1px solid rgba(255,255,255,0.2); font-size: 13px; font-weight: bold; z-index: 1000; display: none; transition: 0.3s; animation: slideUp 0.4s ease; }
        @keyframes slideUp { from { bottom: 50px; opacity: 0; } to { bottom: 100px; opacity: 1; } }

        .app { height: 100vh; display: flex; flex-direction: column; padding: 15px; }
        .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        
        /* ÿ≤ÿ± ÿßŸÑŸÖÿ≠ŸÅÿ∏ÿ© ÿßŸÑŸÖÿ∑Ÿàÿ± */
        #ton-connect-btn { background: #0088cc; color: white; border: none; padding: 10px 18px; border-radius: 12px; font-weight: bold; cursor: pointer; display: flex; align-items: center; gap: 8px; }
        .connected-status { background: var(--green) !important; box-shadow: 0 0 15px var(--green); }

        .screen { display: none; flex-direction: column; align-items: center; flex-grow: 1; overflow-y: auto; padding-bottom: 120px; }
        .active { display: flex; }

        /* ÿØÿßÿ¶ÿ±ÿ© ÿßŸÑÿ™ÿπÿØŸäŸÜ ÿßŸÑŸÖÿ™ÿ≠ÿ±ŸÉÿ© */
        .mining-circle-container { position: relative; width: 220px; height: 220px; margin: 20px 0; }
        .mining-circle { width: 100%; height: 100%; border-radius: 50%; background: radial-gradient(circle, #2c2f35 0%, #000 100%); border: 8px solid #1c1f24; display: flex; align-items: center; justify-content: center; position: relative; z-index: 2; transition: 0.5s; }
        .mining-active { border-color: var(--gold); animation: pulse 2s infinite ease-in-out; }
        .glow-effect { position: absolute; top: 0; left: 0; width: 100%; height: 100%; border-radius: 50%; background: var(--gold); filter: blur(40px); opacity: 0; transition: 0.5s; }
        .mining-active + .glow-effect { opacity: 0.15; }

        @keyframes pulse { 0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(243, 186, 47, 0.4); } 70% { transform: scale(1.02); box-shadow: 0 0 0 20px rgba(243, 186, 47, 0); } 100% { transform: scale(1); } }

        .main-balance { font-size: 45px; font-weight: 900; margin: 10px 0; letter-spacing: -1px; }
        .card { background: var(--card); width: 100%; border-radius: 25px; padding: 20px; border: 1px solid #333; margin-top: 15px; box-sizing: border-box; }
        .btn-gold { background: var(--gold); color: black; border: none; padding: 15px; border-radius: 18px; font-weight: 900; width: 100%; cursor: pointer; transition: 0.2s; }
        .btn-gold:active { transform: scale(0.98); }

        /* Navigation */
        .nav { position: fixed; bottom: 20px; left: 20px; right: 20px; background: rgba(28, 31, 36, 0.8); backdrop-filter: blur(20px); border-radius: 30px; display: flex; justify-content: space-around; padding: 15px; border: 1px solid #333; }
        .nav-item { color: #666; font-size: 11px; font-weight: bold; cursor: pointer; transition: 0.3s; }
        .nav-item.active { color: var(--gold); transform: translateY(-3px); }
    </style>
</head>
<body>

<div id="toast">Copied! üöÄ</div>

<div class="app">
    <div class="header">
        <div style="display:flex; align-items:center; gap:10px;">
            <img id="u-avatar" src="" style="width:35px; border-radius:50%; border:2px solid var(--gold);">
            <span id="u-name" style="font-weight:900; font-size:14px;">...</span>
        </div>
        <button id="ton-connect-btn" onclick="toggleWallet()">Connect Wallet</button>
    </div>

    <div id="home" class="screen active">
        <div style="color:#888; font-size:12px; font-weight:bold;">AVAILABLE ASSETS</div>
        <div class="main-balance" id="balance">0.0000</div>

        <div class="mining-circle-container">
            <div id="circle-element" class="mining-circle">
                <span id="circle-text" style="font-size:24px; font-weight:900; color:#444;">IDLE</span>
            </div>
            <div class="glow-effect"></div>
        </div>

        <div id="timer" style="font-weight:900; color:var(--gold); margin-bottom:15px;">Ready to Mine</div>
        <button id="mine-btn" class="btn-gold" onclick="startMining()">START MINING</button>

        <div style="display:flex; width:100%; gap:15px; margin-top:20px;">
            <div class="card" style="margin:0; flex:1; text-align:center;">
                <small style="color:#888">Speed</small><br><b id="speed-val">0.01/h</b>
            </div>
            <div class="card" style="margin:0; flex:1; text-align:center;">
                <small style="color:#888">Time</small><br><b>6 Hours</b>
            </div>
        </div>
    </div>

    <div id="wallet" class="screen">
        <div class="card" style="text-align:center;">
            <h2>Withdraw</h2>
            <div class="main-balance" id="with-bal" style="color:var(--gold)">0.0000</div>
            <p style="color:#888; font-size:12px;">Minimum to withdraw is 100.00 Gold</p>
            <button class="btn-gold" onclick="requestWithdraw()">CONFIRM WITHDRAW</button>
        </div>
    </div>

    <div id="friends" class="screen">
        <h2>Referral System</h2>
        <div class="card">
            <p style="font-size:12px; color:#aaa;">Invite friends and get 10% of their mining!</p>
            <div style="background:#000; padding:15px; border-radius:15px; font-size:11px; margin:10px 0; word-break:break-all;" id="ref-link">
                https://t.me/GoldenClaim_Bot?ref=user123
            </div>
            <button class="btn-gold" onclick="copyLink()">COPY INVITE LINK</button>
        </div>
    </div>

    <nav class="nav">
        <div class="nav-item active" onclick="showTab('home', this)">Mining</div>
        <div class="nav-item" onclick="showTab('friends', this)">Friends</div>
        <div class="nav-item" onclick="showTab('wallet', this)">Wallet</div>
    </nav>
</div>

<script>
    const tg = window.Telegram.WebApp;
    tg.expand();

    // ÿ•ÿπÿØÿßÿØ ÿßŸÑŸÖÿ≠ŸÅÿ∏ÿ©
    const tonConnectUI = new TON_CONNECT_UI.TonConnectUI({
        manifestUrl: 'https://raw.githubusercontent.com/ton-community/tutorials/main/03-client/test/public/tonconnect-manifest.json',
        buttonRootId: 'ton-connect-btn'
    });

    // ŸÖÿ±ÿßŸÇÿ®ÿ© ÿ≠ÿßŸÑÿ© ÿßŸÑŸÖÿ≠ŸÅÿ∏ÿ© ŸÑÿ™ÿ∫ŸäŸäÿ± ŸÑŸàŸÜ ÿßŸÑÿ≤ÿ±
    tonConnectUI.onStatusChange(wallet => {
        const btn = document.getElementById('ton-connect-btn');
        if (wallet) {
            btn.innerText = "Connected ‚úÖ";
            btn.classList.add('connected-status');
            showToast("Wallet Linked Successfully! ü¶ä");
        } else {
            btn.innerText = "Connect Wallet";
            btn.classList.remove('connected-status');
        }
    });

    let balance = parseFloat(localStorage.getItem('g_bal')) || 0;
    let speed = parseFloat(localStorage.getItem('g_speed')) || 0.05;
    let miningEndTime = localStorage.getItem('g_end_time') || null;

    function updateUI() {
        document.getElementById('balance').innerText = balance.toFixed(4);
        document.getElementById('with-bal').innerText = balance.toFixed(4);
        document.getElementById('speed-val').innerText = speed.toFixed(2) + "/h";
        document.getElementById('u-name').innerText = tg.initDataUnsafe.user?.first_name || "Mugahed";
        document.getElementById('u-avatar').src = tg.initDataUnsafe.user?.photo_url || "https://via.placeholder.com/35";
        localStorage.setItem('g_bal', balance);
    }

    function showToast(msg) {
        const t = document.getElementById('toast');
        t.innerText = msg;
        t.style.display = 'block';
        setTimeout(() => { t.style.display = 'none'; }, 2500);
    }

    function startMining() {
        if (!miningEndTime) {
            miningEndTime = Date.now() + (6 * 60 * 60 * 1000);
            localStorage.setItem('g_end_time', miningEndTime);
            showToast("Mining Started! See you in 6h ‚õèÔ∏è");
        }
    }

    function checkMining() {
        const circle = document.getElementById('circle-element');
        const text = document.getElementById('circle-text');
        const btn = document.getElementById('mine-btn');

        if (miningEndTime) {
            const diff = miningEndTime - Date.now();
            if (diff > 0) {
                circle.classList.add('mining-active');
                text.innerText = "MINING...";
                text.style.color = "var(--gold)";
                btn.disabled = true;
                btn.style.opacity = "0.5";
                const h = Math.floor(diff/3600000);
                const m = Math.floor((diff%3600000)/60000);
                document.getElementById('timer').innerText = `Time Remaining: ${h}h ${m}m`;
            } else {
                balance += (speed * 6);
                miningEndTime = null;
                localStorage.removeItem('g_end_time');
                circle.classList.remove('mining-active');
                text.innerText = "CLAIM";
                btn.disabled = false;
                btn.style.opacity = "1";
                document.getElementById('timer').innerText = "Mining Finished! Claim your reward.";
                updateUI();
            }
        }
    }

    function copyLink() {
        navigator.clipboard.writeText(document.getElementById('ref-link').innerText);
        showToast("Link Copied Successfully! üöÄ");
    }

    function showTab(id, el) {
        document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
        document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        el.classList.add('active');
    }

    setInterval(checkMining, 1000);
    updateUI();
</script>
</body>
</html>

