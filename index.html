<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Golden Claim | Imperial Edition</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://unpkg.com/@tonconnect/ui@latest/dist/tonconnect-ui.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root { --gold: #FFD700; --bg: #000000; --card: rgba(255, 255, 255, 0.05); }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; user-select: none; }
        
        body { 
            margin: 0; background: var(--bg); color: white; 
            font-family: 'Montserrat', sans-serif; height: 100vh; overflow: hidden;
            background: radial-gradient(circle at 50% -20%, #2c2f35 0%, #000 100%);
        }

        .app-container { height: 100vh; display: flex; flex-direction: column; padding: 20px; }

        /* Ø§Ù„Ù‡ÙŠØ¯Ø± Ø§Ù„Ø¹Ù„ÙˆÙŠ */
        .top-bar { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .user-pill { background: var(--card); padding: 8px 15px; border-radius: 20px; border: 1px solid #333; display: flex; align-items: center; gap: 10px; }
        .user-pill img { width: 30px; height: 30px; border-radius: 50%; border: 1px solid var(--gold); }
        
        /* Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ù…Ø­ÙØ¸Ø© */
        #ton-connect-button { transform: scale(0.8); transform-origin: right; }

        /* Ø´Ø±ÙŠØ· Ø§Ù„Ù…Ø³ØªÙˆÙ‰ */
        .lvl-section { width: 100%; margin-bottom: 25px; }
        .lvl-info { display: flex; justify-content: space-between; font-size: 11px; font-weight: 900; color: var(--gold); margin-bottom: 6px; }
        .progress-bg { width: 100%; height: 10px; background: #1a1a1a; border-radius: 10px; border: 1px solid #333; overflow: hidden; }
        .progress-fill { height: 100%; background: linear-gradient(90deg, #fff, var(--gold)); width: 0%; transition: 0.4s; box-shadow: 0 0 15px var(--gold); }

        /* Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø±ØµÙŠØ¯ */
        .balance-area { text-align: center; margin-bottom: 20px; }
        .balance-amount { font-size: 55px; font-weight: 900; text-shadow: 0 0 20px rgba(255,255,255,0.2); }

        /* Ø§Ù„Ø¹Ù…Ù„Ø© Ø§Ù„ÙƒØ¨ÙŠØ±Ø© */
        .coin-box { position: relative; display: flex; justify-content: center; align-items: center; flex-grow: 1; }
        .main-coin {
            width: 280px; height: 280px; border-radius: 50%;
            background: radial-gradient(circle, #f5bb5f 0%, #7d5a22 100%);
            border: 12px solid #222; box-shadow: 0 0 60px rgba(245,187,95,0.2);
            display: flex; justify-content: center; align-items: center;
            cursor: pointer; transition: transform 0.05s;
        }
        .main-coin:active { transform: scale(0.94); }
        .main-coin::after { content: "G"; font-size: 130px; font-weight: 900; color: rgba(0,0,0,0.15); }

        /* Ø§Ù„Ø£Ø±Ù‚Ø§Ù… Ø§Ù„Ø·Ø§Ø¦Ø±Ø© */
        .tap-anim { position: absolute; color: white; font-size: 35px; font-weight: 900; pointer-events: none; animation: fly 0.8s ease-out forwards; }
        @keyframes fly { 0% { opacity: 1; transform: translateY(0); } 100% { opacity: 0; transform: translateY(-150px); } }

        /* Ø§Ù„Ø´Ø§Ø´Ø§Øª */
        .screen { display: none; flex-direction: column; width: 100%; animation: fadeIn 0.3s; }
        .active { display: flex; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* Ø§Ù„Ø£Ø²Ø±Ø§Ø± ÙˆØ§Ù„ÙƒØ±ÙˆØª */
        .grid-cards { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; width: 100%; }
        .upgrade-card { background: var(--card); border: 1px solid #333; border-radius: 20px; padding: 15px; text-align: center; backdrop-filter: blur(10px); }
        .upgrade-card h4 { margin: 0 0 5px 0; color: var(--gold); }
        .buy-btn { background: var(--gold); color: black; border: none; padding: 8px 15px; border-radius: 10px; font-weight: 900; margin-top: 10px; width: 100%; }

        /* Ù…Ù†ÙŠÙˆ Ø§Ù„ØªÙ†Ù‚Ù„ */
        .bottom-nav { 
            position: fixed; bottom: 20px; left: 15px; right: 15px; 
            background: rgba(20,20,20,0.9); backdrop-filter: blur(20px);
            border-radius: 30px; border: 1px solid #333;
            display: flex; justify-content: space-around; padding: 15px;
        }
        .nav-btn { color: #666; font-size: 10px; font-weight: bold; text-align: center; cursor: pointer; transition: 0.3s; }
        .nav-btn.active { color: var(--gold); transform: translateY(-5px); }
        .nav-btn svg { width: 24px; height: 24px; display: block; margin: 0 auto 5px; fill: currentColor; }
    </style>
</head>
<body>

<div class="app-container">
    <div class="top-bar">
        <div class="user-pill">
            <img id="u-img" src="https://via.placeholder.com/30" alt="">
            <span id="u-name" style="font-size: 12px; font-weight: 900;">Mugahed</span>
        </div>
        <div id="ton-connect-button"></div>
    </div>

    <div class="lvl-section">
        <div class="lvl-info">
            <span id="rank-name">BRONZE MINER</span>
            <span>LVL <b id="lvl-num">1</b></span>
        </div>
        <div class="progress-bg"><div class="progress-fill" id="xp-bar"></div></div>
    </div>

    <div id="home" class="screen active">
        <div class="balance-area">
            <div class="balance-amount" id="balance">0</div>
            <div style="color: var(--gold); font-weight: bold; font-size: 12px;">GOLD ASSETS</div>
        </div>
        
        <div class="coin-box">
            <div class="main-coin" id="coin"></div>
        </div>

        <div style="margin-bottom: 100px;">
            <div style="display:flex; justify-content:space-between; font-size:12px; margin-bottom:5px; font-weight:bold;">
                <span id="nrg-txt">1000/1000</span><span>âš¡ ENERGY</span>
            </div>
            <div class="progress-bg" style="height:6px;"><div class="progress-fill" id="nrg-bar" style="width:100%;"></div></div>
        </div>
    </div>

    <div id="mine" class="screen">
        <h2 style="text-align:center; color:var(--gold);">MINING HUB</h2>
        <div class="grid-cards">
            <div class="upgrade-card">
                <h4>Multi-Tap</h4>
                <p style="font-size:10px;">+1 per click</p>
                <div style="font-weight:900; color:var(--gold);">500 ğŸª™</div>
                <button class="buy-btn" onclick="buy('mt')">UPGRADE</button>
            </div>
            <div class="upgrade-card">
                <h4>Energy</h4>
                <p style="font-size:10px;">+500 Limit</p>
                <div style="font-weight:900; color:var(--gold);">1,000 ğŸª™</div>
                <button class="buy-btn" onclick="buy('el')">UPGRADE</button>
            </div>
        </div>
    </div>

    <nav class="bottom-nav">
        <div class="nav-btn active" onclick="tab('home', this)">
            <svg viewBox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>HOME
        </div>
        <div class="nav-btn" onclick="tab('mine', this)">
            <svg viewBox="0 0 24 24"><path d="M12 2L4.5 20.29l.71.71L12 18l6.79 3 .71-.71z"/></svg>MINE
        </div>
        <div class="nav-btn" onclick="alert('Coming Soon!')">
            <svg viewBox="0 0 24 24"><path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5s-3 1.34-3 3 1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5z"/></svg>FRIENDS
        </div>
    </nav>
</div>

<script>
    const tg = window.Telegram.WebApp;
    tg.expand();

    // Ø±Ø¨Ø· Ø§Ù„Ù…Ø­ÙØ¸Ø© Ø§Ù„Ø±Ø³Ù…ÙŠ
    const tonConnectUI = new TON_CONNECT_UI.TonConnectUI({
        manifestUrl: 'https://raw.githubusercontent.com/ton-community/tutorials/main/03-client/test/public/tonconnect-manifest.json',
        buttonRootId: 'ton-connect-button'
    });

    // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
    document.getElementById('u-name').innerText = tg.initDataUnsafe.user?.first_name || "Mugahed";
    document.getElementById('u-img').src = tg.initDataUnsafe.user?.photo_url || "https://via.placeholder.com/30";

    // Ø§Ù„Ù„Ø¹Ø¨Ø©
    let bal = parseInt(localStorage.getItem('bal')) || 0;
    let nrg = parseInt(localStorage.getItem('nrg')) || 1000;
    let power = parseInt(localStorage.getItem('pwr')) || 1;

    function sync() {
        document.getElementById('balance').innerText = bal.toLocaleString();
        document.getElementById('nrg-txt').innerText = nrg + "/1000";
        document.getElementById('nrg-bar').style.width = (nrg/10) + "%";
        
        // Ø´Ø±ÙŠØ· Ø§Ù„Ù…Ø³ØªÙˆÙ‰
        let progress = (bal % 10000) / 100;
        document.getElementById('xp-bar').style.width = progress + "%";
        
        localStorage.setItem('bal', bal);
        localStorage.setItem('nrg', nrg);
        localStorage.setItem('pwr', power);
    }

    document.getElementById('coin').addEventListener('touchstart', (e) => {
        e.preventDefault();
        if(nrg >= power) {
            bal += power; nrg -= power; sync();
            createAnim(e.touches[0].clientX, e.touches[0].clientY);
            if(navigator.vibrate) navigator.vibrate(10);
        }
    });

    function createAnim(x, y) {
        const d = document.createElement('div');
        d.className = 'tap-anim'; d.innerText = `+${power}`;
        d.style.left = x + 'px'; d.style.top = y + 'px';
        document.body.appendChild(d);
        setTimeout(() => d.remove(), 800);
    }

    function tab(id, el) {
        document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
        document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        el.classList.add('active');
    }

    function buy(type) {
        if(type === 'mt' && bal >= 500) { bal -= 500; power++; sync(); alert('Upgraded!'); }
        else if(type === 'el' && bal >= 1000) { bal -= 1000; alert('Energy Limit Increased!'); }
    }

    setInterval(() => { if(nrg < 1000) { nrg += 2; sync(); } }, 1500);
    sync();
</script>
</body>
</html>

